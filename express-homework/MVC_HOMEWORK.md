# Express MVC Homework - –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ MVC

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑–∞ –ø–∞—Ç–µ—Ä–Ω–æ–º **Model-View-Controller** –∑ —á—ñ—Ç–∫–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é —Ñ–∞–π–ª—ñ–≤.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
src/
‚îú‚îÄ‚îÄ controllers/              # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ (–±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ productController.js
‚îÇ   ‚îú‚îÄ‚îÄ orderController.js
‚îÇ   ‚îî‚îÄ‚îÄ dashboardController.js
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ api/                  # API –º–∞—Ä—à—Ä—É—Ç–∏ –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º /api
‚îÇ       ‚îú‚îÄ‚îÄ products.js
‚îÇ       ‚îú‚îÄ‚îÄ orders.js
‚îÇ       ‚îî‚îÄ‚îÄ dashboard.js
‚îú‚îÄ‚îÄ middleware/               # Middleware
‚îÇ   ‚îú‚îÄ‚îÄ requestLogger.js      # –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ authMiddleware.js     # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ views/                    # EJS —à–∞–±–ª–æ–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ layout.ejs            # –ì–æ–ª–æ–≤–Ω–∏–π layout
‚îÇ   ‚îú‚îÄ‚îÄ partials/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ navbar-mvc.ejs
‚îÇ   ‚îú‚îÄ‚îÄ products-list.ejs
‚îÇ   ‚îú‚îÄ‚îÄ product-detail.ejs
‚îÇ   ‚îú‚îÄ‚îÄ search-products.ejs
‚îÇ   ‚îú‚îÄ‚îÄ orders-list.ejs
‚îÇ   ‚îú‚îÄ‚îÄ order-detail.ejs
‚îÇ   ‚îî‚îÄ‚îÄ dashboard-stats.ejs
‚îî‚îÄ‚îÄ app.js                    # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª
```

---

## ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 1: –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Ç–æ–≤–∞—Ä—ñ–≤

### –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä: `productController.js`
- `getAllProducts()` - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤
- `getProductById()` - –¥–µ—Ç–∞–ª—ñ —Ç–æ–≤–∞—Ä—É
- `searchProducts()` - –ø–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤

### –ú–∞—Ä—à—Ä—É—Ç–∏:
- `GET /api/products?auth=true` - –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏
- `GET /api/products/:id?auth=true` - —Ç–æ–≤–∞—Ä –∑–∞ ID
- `GET /api/products/search?auth=true&name=...` - –ø–æ—à—É–∫

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è:
- ‚úÖ –¢–æ–≤–∞—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- ‚úÖ –ü–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫ ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- ‚úÖ –ù–µ–º–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ—à—É–∫—É ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
```bash
# –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ (–ø–æ—Ç—Ä—ñ–±–µ–Ω auth=true)
http://localhost:5001/api/products?auth=true

# –î–µ—Ç–∞–ª—ñ —Ç–æ–≤–∞—Ä—É
http://localhost:5001/api/products/1?auth=true

# –ü–æ—à—É–∫
http://localhost:5001/api/products/search?auth=true&name=–Ω–æ—É—Ç–±—É–∫
```

---

## ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 2: CRUD –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω—å

### –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä: `orderController.js`
- `getOrders()` - —Å–ø–∏—Å–æ–∫ –∑–∞–º–æ–≤–ª–µ–Ω—å
- `getOrderById()` - –¥–µ—Ç–∞–ª—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `createOrder()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `deleteOrder()` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

### –ú–∞—Ä—à—Ä—É—Ç–∏:
- `GET /api/orders` - –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `GET /api/orders/:id` - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑–∞ ID
- `POST /api/orders` - —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `GET /api/orders/delete/:id` - –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
```bash
# –°–ø–∏—Å–æ–∫ –∑–∞–º–æ–≤–ª–µ–Ω—å
http://localhost:5001/api/orders

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (—á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)
# –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–∫–Ω–æ–ø–∫–∞ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)
```

---

## ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 3: Middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è

### –§–∞–π–ª: `middleware/requestLogger.js`

–õ–æ–≥—É—î –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç —É —Ñ–æ—Ä–º–∞—Ç—ñ:
```
[2025-10-16 16:50:15] GET /api/products
[2025-10-16 16:50:20] POST /api/orders
```

–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ `app.js`:
```javascript
app.use(requestLogger);
```

---

## ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 4: –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è Router-—ñ–≤ (prefix routes)

–í—Å—ñ MVC –º–∞—Ä—à—Ä—É—Ç–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ `routes/api/` –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º `/api`:

```javascript
app.use('/api/products', apiProductsRoutes);
app.use('/api/orders', apiOrdersRoutes);
app.use('/api/dashboard', apiDashboardRoutes);
```

---

## ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 5: Dashboard –∑ –∫—ñ–ª—å–∫–æ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞–º–∏

### –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä: `dashboardController.js`
- `getStats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏
- `getReport()` - —Ç–µ–∫—Å—Ç–æ–≤–∏–π –∑–≤—ñ—Ç

### –ú–∞—Ä—à—Ä—É—Ç–∏:
- `GET /api/dashboard/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/dashboard/report` - –∑–≤—ñ—Ç

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
```bash
http://localhost:5001/api/dashboard/stats
http://localhost:5001/api/dashboard/report
```

---

## ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 6: Layout —ñ–∑ –∫—ñ–ª—å–∫–æ–º–∞ —Å–µ–∫—Ü—ñ—è–º–∏

### –§–∞–π–ª: `views/layout.ejs`

–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Header** - —à–∞–ø–∫–∞ —Å–∞–π—Ç—É
- **Navbar** - –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- **Main** - –æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∑–º—ñ–Ω–Ω–∞ `body`)
- **Sidebar** - –±—ñ—á–Ω–∞ –ø–∞–Ω–µ–ª—å (–∑–º—ñ–Ω–Ω–∞ `sidebar`)
- **Footer** - –ø—ñ–¥–≤–∞–ª

–ö–æ–∂–µ–Ω —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–¥–∞—î —Å–≤—ñ–π –∫–æ–Ω—Ç–µ–Ω—Ç:
```javascript
const body = `<h2>–ö–æ–Ω—Ç–µ–Ω—Ç</h2>`;
const sidebar = `<p>Sidebar</p>`;
<%- include('layout', { body, sidebar, title: '–ó–∞–≥–æ–ª–æ–≤–æ–∫' }) %>
```

---

## ‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 7 (–ë–û–ù–£–°): Router-level middleware

### –§–∞–π–ª: `middleware/authMiddleware.js`

–ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø–∞—Ä–∞–º–µ—Ç—Ä `?auth=true` –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ç–æ–≤–∞—Ä—ñ–≤:

```javascript
// –£ routes/api/products.js
router.use(authMiddleware);
```

**–ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó:**
```
–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ. –î–æ–¥–∞–π—Ç–µ ?auth=true –¥–æ URL
```

**–ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é:**
```
http://localhost:5001/api/products?auth=true
```

---

## üéØ –í–∏–∫–æ–Ω–∞–Ω—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó

### –û—Å–Ω–æ–≤–Ω—ñ:
- ‚úÖ –û–∫—Ä–µ–º—ñ router —ñ controller –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
- ‚úÖ –í–∏–≤—ñ–¥ —á–µ—Ä–µ–∑ EJS (—Ç–∞–±–ª–∏—Ü—è + –¥–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞)
- ‚úÖ –ü–æ—à—É–∫ —á–µ—Ä–µ–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
- ‚úÖ Partials –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (–Ω–µ–º–∞—î —Ç–æ–≤–∞—Ä—É, –Ω–µ–º–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤)

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ:
- ‚úÖ –ü–æ–≤–Ω–∏–π CRUD –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω—å
- ‚úÖ Middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –ø—Ä–µ—Ñ—ñ–∫—Å–∏ (/api)
- ‚úÖ –ö—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ (products, orders, dashboard)
- ‚úÖ Layout –∑ header, main, sidebar, footer
- ‚úÖ Router-level middleware (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è)

---

## üöÄ –ó–∞–ø—É—Å–∫

```bash
cd express-homework
npm start
```

**–°–µ—Ä–≤–µ—Ä:** http://localhost:5001

---

## üîó –û—Å–Ω–æ–≤–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

### –¢–æ–≤–∞—Ä–∏ (–ø–æ—Ç—Ä—ñ–±–µ–Ω auth=true):
- http://localhost:5001/api/products?auth=true
- http://localhost:5001/api/products/1?auth=true
- http://localhost:5001/api/products/search?auth=true&name=–º–∏—à–∫–∞

### –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è:
- http://localhost:5001/api/orders
- http://localhost:5001/api/orders/1

### Dashboard:
- http://localhost:5001/api/dashboard/stats
- http://localhost:5001/api/dashboard/report

### –Ü–Ω—à—ñ:
- http://localhost:5001/ - –ì–æ–ª–æ–≤–Ω–∞
- http://localhost:5001/products - EJS —Ç–æ–≤–∞—Ä–∏
- http://localhost:5001/comments - EJS –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ

---

## üìä –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### 1. MVC Pattern
- **Model** - –¥–∞–Ω—ñ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞—Ö (–º–∞—Å–∏–≤–∏ –≤ –ø–∞–º'—è—Ç—ñ)
- **View** - EJS —à–∞–±–ª–æ–Ω–∏
- **Controller** - –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞

### 2. Middleware
- `requestLogger` - –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤
- `authMiddleware` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ auth=true
- `express.urlencoded` - –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º

### 3. Layout System
- –Ñ–¥–∏–Ω–∏–π layout –¥–ª—è –≤—Å—ñ—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫
- –î–∏–Ω–∞–º—ñ—á–Ω–∏–π sidebar
- Responsive –¥–∏–∑–∞–π–Ω

### 4. Error Handling
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
- 404 –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤

---

## üéì –©–æ –≤–∏–≤—á–µ–Ω–æ

- ‚úÖ MVC –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ —Ä–æ—É—Ç–µ—Ä–∏
- ‚úÖ Middleware (–≥–ª–æ–±–∞–ª—å–Ω–∏–π —Ç–∞ router-level)
- ‚úÖ EJS Layout System
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü—ñ—è –∫–æ–¥—É
- ‚úÖ –ü—Ä–µ—Ñ—ñ–∫—Å–∏ –º–∞—Ä—à—Ä—É—Ç—ñ–≤

---

**–í—Å—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ! üéâ**
