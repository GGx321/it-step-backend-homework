<% 
    const isEdit = action === 'edit';
    const formTitle = isEdit ? '–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó' : '–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó';
    const formAction = isEdit ? `/api/categories/edit/${category.id}` : '/api/categories/new';
    const buttonText = isEdit ? 'üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏' : '‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é';
    
    const body = `
        <h2>${formTitle}</h2>
        
        ${error ? `
            <div class="message error">
                ‚ö†Ô∏è ${error}
            </div>
        ` : ''}
        
        <form method="POST" action="${formAction}">
            <div style="margin-bottom: 15px;">
                <label for="name" style="display: block; margin-bottom: 5px; font-weight: bold;">
                    –ù–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó: <span style="color: red;">*</span>
                </label>
                <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    value="${category ? category.name : ''}" 
                    placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó"
                    maxlength="30"
                    required
                    style="width: 100%; max-width: 500px;"
                >
                <small style="color: #666; display: block; margin-top: 5px;">
                    –ú–∞–∫—Å–∏–º—É–º 30 —Å–∏–º–≤–æ–ª—ñ–≤
                </small>
            </div>
            
            <div style="margin-top: 20px;">
                <button type="submit">${buttonText}</button>
                <a href="/api/categories" class="btn" style="background-color: #999; margin-left: 10px;">‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏</a>
            </div>
        </form>
        
        <div style="margin-top: 30px; padding: 15px; background-color: #f0f0f0; border-radius: 5px;">
            <h4>üí° –ü—ñ–¥–∫–∞–∑–∫–∏:</h4>
            <ul>
                <li>–ù–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –æ–±–æ–≤'—è–∑–∫–æ–≤–∞</li>
                <li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞: 30 —Å–∏–º–≤–æ–ª—ñ–≤</li>
                <li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑—Ä–æ–∑—É–º—ñ–ª—ñ –Ω–∞–∑–≤–∏</li>
            </ul>
        </div>
    `;
    
    const sidebar = `
        <h4>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h4>
        <p>${isEdit ? '–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —ñ—Å–Ω—É—é—á–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó' : '–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–æ–≤–∞—Ä—ñ–≤'}</p>
        ${isEdit && category ? `
            <hr>
            <h4>–ü–æ—Ç–æ—á–Ω—ñ –¥–∞–Ω—ñ</h4>
            <p><strong>ID:</strong> ${category.id}</p>
            <p><strong>–ù–∞–∑–≤–∞:</strong> ${category.name}</p>
            <p><strong>–°—Ç–≤–æ—Ä–µ–Ω–æ:</strong><br>${new Date(category.createdAt).toLocaleDateString('uk-UA')}</p>
        ` : ''}
    `;
%>
<%- include('layout', { body, sidebar, title: formTitle }) %>
